import{c as L,d as k,u as x,a as C,b as c,n as I,t as y,p as N,F as T,w as A,_ as q,e as M,r as j,o as O,f as R,g as _,h as w,i as U,j as z,k as D,l as G,C as H,B as K}from"./index-2e5f8ac5.js";/* empty css              */import{l as W}from"./user-b8e2e85f.js";/* empty css              *//* empty css              */import{N as Y}from"./index-dfd92b46.js";import{s as $,a as J}from"./function-call-875e4379.js";import"./axios-772a9739.js";const[Q,X]=L("form"),Z={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:I,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:y,showErrorMessage:y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ee=k({name:Q,props:Z,emits:["submit","failed"],setup(n,{emit:m,slots:l}){const{children:r,linkChildren:g}=x(T),s=e=>e?r.filter(t=>e.includes(t.name)):r,d=e=>new Promise((t,o)=>{const i=[];s(e).reduce((F,E)=>F.then(()=>{if(!i.length)return E.validate().then(B=>{B&&i.push(B)})}),Promise.resolve()).then(()=>{i.length?o(i):t()})}),h=e=>new Promise((t,o)=>{const i=s(e);Promise.all(i.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?o(a):t()})}),p=e=>{const t=r.find(o=>o.name===e);return t?new Promise((o,i)=>{t.validate().then(a=>{a?i(a):o()})}):Promise.reject()},f=e=>typeof e=="string"?p(e):n.validateFirst?d(e):h(e),v=e=>{typeof e=="string"&&(e=[e]),s(e).forEach(o=>{o.resetValidation()})},b=()=>r.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),u=(e,t)=>{r.some(o=>o.name===e?(o.$el.scrollIntoView(t),!0):!1)},S=()=>r.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),V=()=>{const e=S();f().then(()=>m("submit",e)).catch(t=>{m("failed",{values:e,errors:t}),n.scrollToError&&t[0].name&&u(t[0].name)})},P=e=>{N(e),V()};return g({props:n}),C({submit:V,validate:f,getValues:S,scrollToField:u,resetValidation:v,getValidationStatus:b}),()=>{var e;return c("form",{class:X(),onSubmit:P},[(e=l.default)==null?void 0:e.call(l)])}}});const te=A(ee);const oe=n=>(z("data-v-bc9b7ef3"),n=n(),D(),n),ae={class:"login"},se={class:"login-form"},ne=oe(()=>_("div",null,[_("h3",null,"体验账号")],-1)),le={class:"btn"},re={__name:"Login",setup(n){const m=M(),l=j({username:"57497740",password:"57497740"}),r=async()=>{const{data:s}=await W(l);s.meta.status===200?($("Login in!"),localStorage.setItem("token",s.data.token),localStorage.setItem("id",s.data.id),m.push({path:"/home"})):J(s.meta.msg)},g=()=>{m.push({path:"/home"})};return(s,d)=>{const h=Y,p=G,f=H,v=K,b=te;return O(),R("div",ae,[c(h,{title:"Login to PPLove","left-text":"Home","left-arrow":"",onClickLeft:g}),_("div",se,[ne,c(b,{onSubmit:r},{default:w(()=>[c(f,{inset:""},{default:w(()=>[c(p,{modelValue:l.username,"onUpdate:modelValue":d[0]||(d[0]=u=>l.username=u),label:"username",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),c(p,{modelValue:l.password,"onUpdate:modelValue":d[1]||(d[1]=u=>l.password=u),label:"password",type:"password",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),_("div",le,[c(v,{"native-type":"submit",type:"primary",round:"",size:"normal"},{default:w(()=>[U("login")]),_:1})])]),_:1})])])}}},ge=q(re,[["__scopeId","data-v-bc9b7ef3"]]);export{ge as default};
