import{d as x,e as I,_ as P,o as r,v as B,h as _,b as c,g as s,f as p,x as L,y as w,D as l,i as $,z as D,I as q,N as z,R as V,ag as O,r as C,ap as E,ax as j,ac as F,j as R,k as T,B as J}from"./index-2e5f8ac5.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{S as M}from"./index-ca3234ae.js";import{n as U}from"./NavBar-14a98759.js";import{a as b}from"./good-37f6537b.js";/* empty css              *//* empty css              */import{a as y}from"./function-call-875e4379.js";import"./cart-98dc10ac.js";import"./axios-772a9739.js";const G=x({components:{},props:{productList:Object,productList1:Object},setup(){const i=I();return{productDetail:e=>{i.push({path:`/articleDetail/${e.goods_id}`})}}}}),A={class:"product-wrapper"},H=["onClick"],K={class:"item-info"},Q={class:"goods-name van-multi-ellipsis--l2"},W={class:"prize-amount"},X={class:"amount van-multi-ellipsis--l2"},Y={class:"amount"},Z={class:"product-wrapper"},tt=["onClick"],ot={class:"item-info"},st={class:"goods-name van-multi-ellipsis--l2"},et={class:"prize-amount"},at={class:"amount van-multi-ellipsis--l2"},nt={class:"amount"},it={key:1,class:"empty"};function ct(i,t,e,k,S,f){const m=D,g=q,h=z,a=V,n=O;return i.productList.length+i.productList.length!==0?(r(),B(a,{key:0},{default:_(()=>[c(h,{span:"12"},{default:_(()=>[s("div",A,[(r(!0),p(L,null,w(i.productList,o=>(r(),p("div",{class:"product-item",key:o.goods_id,onClick:d=>i.productDetail(o)},[c(m,{width:"100%",fit:"cover",position:"center",src:o.goods_big_logo},null,8,["src"]),s("div",K,[s("div",Q,l(o.goods_name),1),s("div",W,[s("span",X,l(JSON.parse(o.goods_editor).email),1),s("span",Y,[c(g,{name:"eye-o"}),$(l(o.goods_number),1)])])])],8,H))),128))])]),_:1}),c(h,{span:"12"},{default:_(()=>[s("div",Z,[(r(!0),p(L,null,w(i.productList1,o=>(r(),p("div",{class:"product-item",key:o.goods_id,onClick:d=>i.productDetail(o)},[c(m,{width:"100%",fit:"cover",position:"center",src:o.goods_big_logo},null,8,["src"]),s("div",ot,[s("div",st,l(o.goods_name),1),s("div",et,[s("span",at,l(JSON.parse(o.goods_editor).email),1),s("span",nt,[c(g,{name:"eye-o"}),$(l(o.goods_number),1)])])])],8,tt))),128))])]),_:1})]),_:1})):(r(),p("div",it,[c(n,{image:"search",description:"Found Nothing"})]))}const rt=P(G,[["render",ct],["__scopeId","data-v-42b26d84"]]);const dt=i=>(R("data-v-58a6ac51"),i=i(),T(),i),lt={class:"search-header"},pt=dt(()=>s("div",{class:"left-icon"},[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-chongwu1"})])],-1)),ut={class:"product-list"},_t={class:"posting"},mt={__name:"Community",setup(i){const t=C({productList:[],productList1:[],loading:!1,finished:!1,totalPage:1}),e=C({query:"",pagenum:1,pagesize:10,cat_two_id:1564}),k=I(),S=async()=>{f()},f=async()=>{const{data:a}=await b(e);if(t.finished=!1,a.meta.status===200){const n=[],o=[];a.data.goods.forEach((d,v)=>{v%2===0?n.push(d):o.push(d)}),t.productList=n,t.productList1=o,t.totalPage=Math.ceil(a.data.total/e.pagesize),t.loading=!1,t.totalPage>=a.data.totalPage&&(t.finished=!0)}else return y("获取失败")};S();const m=async()=>{const a=document.querySelector(".product-list");a.scrollTop=0,k.push({query:{}}),e.cat_name=null,e.cat_three_id=null,e.pagenum=1,f()},g=async()=>{const{data:a}=await b(e);if(a.meta.status!==200)return y("获取失败");t.totalPage=Math.ceil(a.data.total/e.pagesize),a.data.goods.forEach((n,o)=>{o%2===0?t.productList.push(n):t.productList1.push(n)}),t.loading=!1,e.pagenum>=a.data.totalPage&&(t.finished=!0)},h=()=>{if(e.pagenum>=t.totalPage){t.finished=!0;return}e.pagenum<t.totalPage&&(e.pagenum=e.pagenum+1),g()};return(a,n)=>{const o=M,d=E,v=J,N=j;return r(),p(L,null,[s("div",lt,[pt,c(o,{modelValue:e.query,"onUpdate:modelValue":n[0]||(n[0]=u=>e.query=u),shape:"round",placeholder:"Search in Community",onSearch:m},null,8,["modelValue"])]),s("div",ut,[c(d,{loading:t.loading,"onUpdate:loading":n[1]||(n[1]=u=>t.loading=u),finished:t.finished,"finished-text":t.productList.length?"No more":"Search for the product you want",onLoad:h,onOffset:u=>0},{default:_(()=>[c(rt,{productList1:t.productList1,productList:t.productList},null,8,["productList1","productList"])]),_:1},8,["loading","finished","finished-text"])]),s("div",_t,[c(N,null,{default:_(()=>[c(v,{onClick:n[2]||(n[2]=u=>F(y)("功能暂不开放")),round:"",color:"rgba(5, 51, 150, .8)",type:"primary",icon:"edit"})]),_:1})]),c(U)],64)}}},Pt=P(mt,[["__scopeId","data-v-58a6ac51"]]);export{Pt as default};
