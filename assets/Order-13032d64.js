import{_ as O,e as V,r as p,o as n,f as l,b as i,h as c,g as s,aA as w,ap as T,x as u,y as m,D as _,i as C,v as D,aB as P,as as I,aC as S}from"./index-2e5f8ac5.js";/* empty css              *//* empty css              *//* empty css              */import{g as z}from"./order-73b7d9c1.js";/* empty css              *//* empty css              */import{N as F}from"./index-dfd92b46.js";import{a as U}from"./function-call-875e4379.js";import"./axios-772a9739.js";const $={class:"order"},q={class:"order-list"},A={class:"order-item-header"},E={class:"order-item-price"},M={__name:"Order",setup(R){const g=V(),e=p({status:"",loading:!1,finished:!1,orderList:[],totalPage:0}),o=p({pagenum:1,pagesize:5,user_id:Number(localStorage.getItem("id"))}),f=async()=>{const{data:a}=await z(o);console.log(a),a.meta.status===200?(e.orderList=e.orderList.concat(a.data.orders),e.totalPage=Math.ceil(a.data.total/o.pagesize)):U(a.meta.msg),e.loading=!1,o.pagenum>=e.totalPage&&(e.finished=!0)},v=()=>{o.pagenum<e.totalPage&&o.pagenum++,f()},h=()=>{g.push("/user")};return(a,d)=>{const y=F,b=P,x=w,L=I,k=S,B=T;return n(),l("div",$,[i(y,{title:"我的订单","left-text":"个人中心","left-arrow":"",onClickLeft:h}),i(x,{class:"order-tab",modelValue:e.status,"onUpdate:modelValue":d[0]||(d[0]=t=>e.status=t)},{default:c(()=>[i(b,{title:"全部"})]),_:1},8,["modelValue"]),s("div",q,[i(B,{loading:e.loading,"onUpdate:loading":d[1]||(d[1]=t=>e.loading=t),finished:e.finished,"finished-text":"我也是有底线的",onLoad:v,onOffset:t=>0},{default:c(()=>[(n(!0),l(u,null,m(e.orderList,(t,N)=>(n(),l("div",{key:N,class:"order-item-box"},[s("div",A,[s("span",null,"订单时间："+_(new Date(t.create_time*1e3).toLocaleString()),1),s("span",null,[i(L,{plain:"",type:t.pay_status==="0"?"primary":"success"},{default:c(()=>[C(_(t.pay_status==="0"?"未支付":"已支付"),1)]),_:2},1032,["type"])])]),(n(!0),l(u,null,m(t.goods,r=>(n(),D(k,{key:r.goods_id,num:r.goods_number,price:r.goods_price,desc:"Door-to-door service",title:r.goods_name,thumb:a.$filters.prefix(r.goods_logo)},null,8,["num","price","title","thumb"]))),128)),s("div",E,[s("span",null,"总价 ￥"+_(t.order_price),1)])]))),128))]),_:1},8,["loading","finished"])])])}}},ee=O(M,[["__scopeId","data-v-a37d2d57"]]);export{ee as default};
