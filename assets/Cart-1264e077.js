import{O as ae,P as be,n as P,d as U,Q as ie,T as fe,t as p,G as M,U as S,b,I as ve,V as J,c as Z,u as ge,W as N,a as ue,X as ee,Y as _e,Z as ke,$ as Se,a0 as Q,w as te,a1 as E,a2 as Ce,J as W,K as j,a3 as le,a4 as oe,a5 as se,a6 as de,a7 as Ve,p as H,a8 as xe,a9 as ye,aa as pe,e as Pe,ab as we,o as x,f as z,ac as y,h as T,ad as F,v as X,g as V,B as Be,x as Te,y as Ie,D as Y,ae as Ee,i as ce,af as Ne,ag as $e}from"./index-2e5f8ac5.js";/* empty css              *//* empty css              */import{S as Ge}from"./index-94a762ef.js";import{N as Le}from"./index-dfd92b46.js";import{n as De}from"./NavBar-14a98759.js";import{u as ze}from"./cart-98dc10ac.js";import{a as Fe}from"./function-call-875e4379.js";const re={name:ae,shape:be("round"),disabled:Boolean,iconSize:P,modelValue:ae,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Oe=U({props:ie({},re,{bem:fe(Function),role:String,parent:Object,checked:Boolean,bindGroup:p}),emits:["click","toggle"],setup(e,{emit:c,slots:r}){const i=M(),u=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},a=S(()=>u("disabled")||e.disabled),o=S(()=>u("direction")),n=S(()=>{const l=e.checkedColor||u("checkedColor");if(l&&e.checked&&!a.value)return{borderColor:l,backgroundColor:l}}),f=l=>{const{target:d}=l,g=i.value,s=g===d||(g==null?void 0:g.contains(d));!a.value&&(s||!e.labelDisabled)&&c("toggle"),c("click",l)},_=()=>{const{bem:l,shape:d,checked:g}=e,s=e.iconSize||u("iconSize");return b("div",{ref:i,class:l("icon",[d,{disabled:a.value,checked:g}]),style:{fontSize:J(s)}},[r.icon?r.icon({checked:g,disabled:a.value}):b(ve,{name:"success",style:n.value},null)])},C=()=>{if(r.default)return b("span",{class:e.bem("label",[e.labelPosition,{disabled:a.value}])},[r.default()])};return()=>{const l=e.labelPosition==="left"?[C(),_()]:[_(),C()];return b("div",{role:e.role,class:e.bem([{disabled:a.value,"label-disabled":e.labelDisabled},o.value]),tabindex:a.value?void 0:0,"aria-checked":e.checked,onClick:f},[l])}}});const[me,Re]=Z("checkbox-group"),Me={max:P,disabled:Boolean,iconSize:P,direction:String,modelValue:_e(),checkedColor:String},he=Symbol(me);var Ue=U({name:me,props:Me,emits:["change","update:modelValue"],setup(e,{emit:c,slots:r}){const{children:i,linkChildren:u}=ge(he),a=n=>c("update:modelValue",n),o=(n={})=>{typeof n=="boolean"&&(n={checked:n});const{checked:f,skipDisabled:_}=n,l=i.filter(d=>d.props.bindGroup?d.props.disabled&&_?d.checked.value:f??!d.checked.value:!1).map(d=>d.name);a(l)};return N(()=>e.modelValue,n=>c("change",n)),ue({toggleAll:o}),ee(()=>e.modelValue),u({props:e,updateValue:a}),()=>{var n;return b("div",{class:Re([e.direction])},[(n=r.default)==null?void 0:n.call(r)])}}});const[Ae,Ke]=Z("checkbox"),qe=ie({},re,{bindGroup:p});var We=U({name:Ae,props:qe,emits:["change","update:modelValue"],setup(e,{emit:c,slots:r}){const{parent:i}=ke(he),u=n=>{const{name:f}=e,{max:_,modelValue:C}=i.props,l=C.slice();if(n)!(_&&l.length>=_)&&!l.includes(f)&&(l.push(f),e.bindGroup&&i.updateValue(l));else{const d=l.indexOf(f);d!==-1&&(l.splice(d,1),e.bindGroup&&i.updateValue(l))}},a=S(()=>i&&e.bindGroup?i.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),o=(n=!a.value)=>{i&&e.bindGroup?u(n):c("update:modelValue",n)};return N(()=>e.modelValue,n=>c("change",n)),ue({toggle:o,props:e,checked:a}),ee(()=>e.modelValue),()=>b(Oe,Q({bem:Ke,role:"checkbox",parent:i,checked:a.value,onToggle:o},e),Se(r,["default","icon"]))}});const je=te(We),He=te(Ue),[Xe,O]=Z("stepper"),Ye=200,R=(e,c)=>String(e)===String(c),Je={min:E(1),max:E(1/0),name:E(""),step:E(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:p,showMinus:p,showInput:p,longPress:p,autoFixed:p,allowEmpty:Boolean,modelValue:P,inputWidth:P,buttonSize:P,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:E(1),decimalLength:P};var Qe=U({name:Xe,props:Je,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:c}){const r=(t,m=!0)=>{const{min:v,max:L,allowEmpty:k,decimalLength:D}=e;return k&&t===""||(t=oe(String(t),!e.integer),t=t===""?0:+t,t=Number.isNaN(t)?+v:t,t=m?Math.max(Math.min(+L,t),+v):t,se(D)&&(t=t.toFixed(+D))),t},i=()=>{var t;const m=(t=e.modelValue)!=null?t:e.defaultValue,v=r(m);return R(v,e.modelValue)||c("update:modelValue",v),v};let u;const a=M(),o=M(i()),n=S(()=>e.disabled||e.disableMinus||o.value<=+e.min),f=S(()=>e.disabled||e.disablePlus||o.value>=+e.max),_=S(()=>({width:J(e.inputWidth),height:J(e.buttonSize)})),C=S(()=>Ce(e.buttonSize)),l=()=>{const t=r(o.value);R(t,o.value)||(o.value=t)},d=t=>{e.beforeChange?xe(e.beforeChange,{args:[t],done(){o.value=t}}):o.value=t},g=()=>{if(u==="plus"&&f.value||u==="minus"&&n.value){c("overlimit",u);return}const t=u==="minus"?-e.step:+e.step,m=r(ye(+o.value,t));d(m),c(u)},s=t=>{const m=t.target,{value:v}=m,{decimalLength:L}=e;let k=oe(String(v),!e.integer);if(se(L)&&k.includes(".")){const ne=k.split(".");k=`${ne[0]}.${ne[1].slice(0,+L)}`}e.beforeChange?m.value=String(o.value):R(v,k)||(m.value=k);const D=k===String(+k);d(D?+k:k)},h=t=>{var m;e.disableInput?(m=a.value)==null||m.blur():c("focus",t)},A=t=>{const m=t.target,v=r(m.value,e.autoFixed);m.value=String(v),o.value=v,de(()=>{c("blur",t),Ve()})};let w,B;const I=()=>{B=setTimeout(()=>{g(),I()},Ye)},K=()=>{e.longPress&&(w=!1,clearTimeout(B),B=setTimeout(()=>{w=!0,g(),I()},pe))},$=t=>{e.longPress&&(clearTimeout(B),w&&H(t))},q=t=>{e.disableInput&&H(t)},G=t=>({onClick:m=>{H(m),u=t,g()},onTouchstartPassive:()=>{u=t,K()},onTouchend:$,onTouchcancel:$});return N(()=>[e.max,e.min,e.integer,e.decimalLength],l),N(()=>e.modelValue,t=>{R(t,o.value)||(o.value=r(t))}),N(o,t=>{c("update:modelValue",t),c("change",t,{name:e.name})}),ee(()=>e.modelValue),()=>b("div",{role:"group",class:O([e.theme])},[W(b("button",Q({type:"button",style:C.value,class:[O("minus",{disabled:n.value}),{[le]:!n.value}],"aria-disabled":n.value||void 0},G("minus")),null),[[j,e.showMinus]]),W(b("input",{ref:a,type:e.integer?"tel":"text",role:"spinbutton",class:O("input"),value:o.value,style:_.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":o.value,onBlur:A,onInput:s,onFocus:h,onMousedown:q},null),[[j,e.showInput]]),W(b("button",Q({type:"button",style:C.value,class:[O("plus",{disabled:f.value}),{[le]:!f.value}],"aria-disabled":f.value||void 0},G("plus")),null),[[j,e.showPlus]])])}});const Ze=te(Qe);const et={class:"cart-box"},tt={key:0,class:"cart-body"},nt={class:"good-item"},at={class:"good-img"},lt=["src"],ot={class:"good-desc"},st={class:"good-title"},ct={class:"good-btn"},it={class:"price"},ut={key:2,class:"empty"},dt=V("div",{class:"title"},"挑点喜欢的放进购物车",-1),kt={__name:"Cart",setup(e){const c=Pe(),r=ze(),{cartItems:i}=we(r),u=S(()=>i.value.length),a=M([]);function o(){i.value.forEach(s=>{s.checked=a.value.indexOf(s.id)!==-1})}const n=S(()=>{let s=0;return i.value.forEach(h=>{h.checked&&(s=s+h.price*h.count*100)}),s}),f=S({get:()=>i.value.every(s=>s.checked),set:s=>{a.value=s?i.value.map(h=>h.id):[],i.value.forEach(h=>{h.checked=s})},initial:!1});function _(s){r.updateItemCount(s)}function C(){a.value.length===0?Fe("先选择商品再结算"):c.push({path:"/createOrder"})}async function l(s){a.value=a.value.filter(h=>h.id!==s),await de(),r.deletItem(s)}const d=()=>{c.go(-1)},g=()=>{c.push({path:"/productList"})};return(s,h)=>{const A=Le,w=je,B=Ze,I=Be,K=Ne,$=He,q=Ge,G=$e;return x(),z("div",et,[b(A,{title:"购物车","left-text":"Back","left-arrow":"",onClickLeft:d}),y(u)?(x(),z("div",tt,[b($,{onChange:h[0]||(h[0]=t=>o()),modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=t=>a.value=t)},{default:T(()=>[(x(!0),z(Te,null,Ie(y(i),(t,m)=>(x(),X(K,{"right-width":50,key:m},{right:T(()=>[b(I,{square:"",icon:"delete",type:"danger",class:"delete-button",onClick:v=>l(t.id)},null,8,["onClick"])]),default:T(()=>[V("div",nt,[b(w,{name:t.id,checked:a.value.includes(t.id)},null,8,["name","checked"]),V("div",at,[V("img",{src:s.$filters.prefix(t.image),alt:""},null,8,lt)]),V("div",ot,[V("div",st,[V("span",null,Y(t.name),1),V("span",null,"x"+Y(t.count),1)]),V("div",ct,[V("div",it,"¥"+Y(t.price),1),b(B,{integer:"",min:1,max:5,modelValue:t.count,"onUpdate:modelValue":v=>t.count=v,name:t.id,"async-change":"",onChange:_},null,8,["modelValue","onUpdate:modelValue","name"])])])])]),_:2},1024))),128))]),_:1},8,["modelValue"])])):F("",!0),y(u)?(x(),X(q,{key:1,class:"submit-all van-hairline--top",price:y(n),"button-text":"结算","button-type":"primary",onSubmit:C},{default:T(()=>[y(u)?(x(),X(w,{key:0,modelValue:y(f),"onUpdate:modelValue":h[2]||(h[2]=t=>Ee(f)?f.value=t:null)},{default:T(()=>[ce("全选")]),_:1},8,["modelValue"])):F("",!0)]),_:1},8,["price"])):F("",!0),y(u)?F("",!0):(x(),z("div",ut,[b(G,{image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"100"}),dt,b(I,{round:"",type:"primary",onClick:g,block:""},{default:T(()=>[ce("Buy Now")]),_:1})])),b(De)])}}};export{kt as default};
